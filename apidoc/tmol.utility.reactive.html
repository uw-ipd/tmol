

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>tmol.utility.reactive &mdash; TMol 0.0.0-90-g97dc5e2 documentation</title>
  

  
  
  
  
    <link rel="canonical" href="http://tmol.uw.ipd.edu/apidoc/tmol.utility.reactive.html"/>
  

  

  
  
    

  

  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="tmol.utility.units" href="tmol.utility.units.html" />
    <link rel="prev" title="tmol.utility.numba" href="tmol.utility.numba.html" /> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> TMol
          

          
          </a>

          
            
            
              <div class="version">
                0.0.0-90-g97dc5e2
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Notes</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../architecture.html">Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../datatypes.html">Datatypes</a></li>
</ul>
<p class="caption"><span class="caption-text">Packages</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="tmol.system.html">tmol.system</a></li>
<li class="toctree-l1"><a class="reference internal" href="tmol.score.html">tmol.score</a></li>
<li class="toctree-l1"><a class="reference internal" href="tmol.database.html">tmol.database</a></li>
<li class="toctree-l1"><a class="reference internal" href="tmol.kinematics.html">tmol.kinematics</a></li>
<li class="toctree-l1"><a class="reference internal" href="tmol.numeric.html">tmol.numeric</a></li>
<li class="toctree-l1"><a class="reference internal" href="tmol.types.html">tmol.types</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="tmol.utility.html">tmol.utility</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="tmol.utility.attr.html">tmol.utility.attr</a></li>
<li class="toctree-l2"><a class="reference internal" href="tmol.utility.categorical.html">tmol.utility.categorical</a></li>
<li class="toctree-l2"><a class="reference internal" href="tmol.utility.log.html">tmol.utility.log</a></li>
<li class="toctree-l2"><a class="reference internal" href="tmol.utility.mixins.html">tmol.utility.mixins</a></li>
<li class="toctree-l2"><a class="reference internal" href="tmol.utility.numba.html">tmol.utility.numba</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">tmol.utility.reactive</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#overview">Overview</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#argument-resolution">Argument Resolution</a></li>
<li class="toctree-l4"><a class="reference internal" href="#result-caching">Result Caching</a></li>
<li class="toctree-l4"><a class="reference internal" href="#reactive-invalidation">Reactive Invalidation</a></li>
<li class="toctree-l4"><a class="reference internal" href="#class-composition">Class Composition</a></li>
<li class="toctree-l4"><a class="reference internal" href="#custom-invalidation">Custom Invalidation</a></li>
<li class="toctree-l4"><a class="reference internal" href="#parameters">** Parameters</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#summary">Summary</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#classes">Classes</a></li>
<li class="toctree-l4"><a class="reference internal" href="#functions">Functions</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#reference">Reference</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="tmol.utility.units.html">tmol.utility.units</a></li>
<li class="toctree-l2"><a class="reference internal" href="tmol.utility.html#summary">Summary</a></li>
<li class="toctree-l2"><a class="reference internal" href="tmol.utility.html#reference">Reference</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="tmol.io.html">tmol.io</a></li>
<li class="toctree-l1"><a class="reference internal" href="tmol.viewer.html">tmol.viewer</a></li>
<li class="toctree-l1"><a class="reference internal" href="tmol.support.html">tmol.support</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">TMol</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="tmol.utility.html">tmol.utility</a> &raquo;</li>
        
      <li>tmol.utility.reactive</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/apidoc/tmol.utility.reactive.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="module-tmol.utility.reactive">
<span id="tmol-utility-reactive"></span><h1>tmol.utility.reactive<a class="headerlink" href="#module-tmol.utility.reactive" title="Permalink to this headline">¶</a></h1>
<p>Attrs-based “reactive” properties.</p>
<div class="section" id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Permalink to this headline">¶</a></h2>
<p><a class="reference internal" href="#module-tmol.utility.reactive" title="tmol.utility.reactive"><code class="xref any py py-mod docutils literal notranslate"><span class="pre">reactive</span></code></a> is a framework to describe the composition and execution of
functions as properties and attributes of a class. By storing function results
as object properties, rather than named variables, <a class="reference internal" href="#module-tmol.utility.reactive" title="tmol.utility.reactive"><code class="xref any py py-mod docutils literal notranslate"><span class="pre">reactive</span></code></a> allows you to
organize <a class="reference external" href="https://toolz.readthedocs.io/en/latest/purity.html" title="(in Toolz v0.9.0)"><span class="xref std std-doc">pure functions</span></a> in a declarative syntax, then
automatically handles dependency resolution, on-demand execution and result
caching.</p>
<p>As a motivating example, <a class="reference internal" href="#module-tmol.utility.reactive" title="tmol.utility.reactive"><code class="xref any py py-mod docutils literal notranslate"><span class="pre">reactive</span></code></a> lets you write:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nd">@reactive_attrs</span><span class="p">(</span><span class="n">auto_attribs</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">class</span> <span class="nc">FactionalAnalysis</span><span class="p">:</span>
    <span class="n">source</span><span class="p">:</span> <span class="nb">str</span>

    <span class="n">montegue_faction</span><span class="p">:</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span>
        <span class="s2">&quot;Romeo&quot;</span><span class="p">,</span> <span class="s2">&quot;Benvolio&quot;</span><span class="p">,</span> <span class="s2">&quot;Montegue&quot;</span><span class="p">,</span> <span class="s2">&quot;Lady Montegue&quot;</span>
    <span class="p">]</span>
    <span class="n">capulet_faction</span><span class="p">:</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span>
        <span class="s2">&quot;Juliet&quot;</span><span class="p">,</span> <span class="s2">&quot;Tybalt&quot;</span><span class="p">,</span> <span class="s2">&quot;Capulet&quot;</span><span class="p">,</span> <span class="s2">&quot;Lady Capulet&quot;</span>
    <span class="p">]</span>

    <span class="nd">@reactive_property</span>
    <span class="k">def</span> <span class="nf">lines</span><span class="p">(</span><span class="n">source</span><span class="p">);</span>
        <span class="sd">&#39;&#39;&#39;Convert text of play to spoken lines.&#39;&#39;&#39;</span>
        <span class="o">...</span>

    <span class="nd">@reactive_property</span>
    <span class="k">def</span> <span class="nf">soliloquies</span><span class="p">(</span><span class="n">lines</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Group spoken lines and identify soliloquies.&#39;&#39;&#39;</span>
        <span class="o">...</span>

    <span class="nd">@reactive_property</span>
    <span class="k">def</span> <span class="nf">montegue_verbosity</span><span class="p">(</span><span class="n">montegue_faction</span><span class="p">,</span> <span class="n">soliloquies</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Calcuate average verbosity of the Montegue faction.&#39;&#39;&#39;</span>
        <span class="o">...</span>

    <span class="nd">@reactive_property</span>
    <span class="k">def</span> <span class="nf">capulet_verbosity</span><span class="p">(</span><span class="n">capulet_faction</span><span class="p">,</span> <span class="n">soliloquies</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Calcuate average verbosity of the Capulet faction.&#39;&#39;&#39;</span>
        <span class="o">...</span>
</pre></div>
</div>
<p>then <em>does the right thing</em> when you ask for:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">analysis</span> <span class="o">=</span> <span class="n">FactionalAnalysis</span><span class="p">(</span><span class="n">source</span><span class="o">=</span><span class="n">act_1</span><span class="p">)</span>
<span class="n">analysis</span><span class="o">.</span><span class="n">montegue_verbosity</span> <span class="o">/</span> <span class="n">analysis</span><span class="o">.</span><span class="n">capulet_verbosity</span>
</pre></div>
</div>
<div class="section" id="argument-resolution">
<h3>Argument Resolution<a class="headerlink" href="#argument-resolution" title="Permalink to this headline">¶</a></h3>
<p><a class="reference internal" href="#module-tmol.utility.reactive" title="tmol.utility.reactive"><code class="xref any py py-mod docutils literal notranslate"><span class="pre">reactive</span></code></a> organizes a computation by binding input data and function results
as <a class="reference external" href="http://www.attrs.org/en/stable/overview.html" title="(in attrs v18.1)"><code class="xref any docutils literal notranslate"><span class="pre">attributes</span></code></a> of a “reactive object”. Function <em>inputs</em> are
resolved on-demand by keyword argument name via <a class="reference external" href="https://docs.python.org/3/library/functions.html#getattr" title="(in Python v3.7)"><code class="xref any docutils literal notranslate"><span class="pre">getattr</span></code></a> from reactive object
properties.  By eschewing <a class="reference external" href="https://docs.scipy.org/doc/numpy/glossary.html#term-self" title="(in NumPy v1.15)"><code class="xref any docutils literal notranslate"><span class="pre">self</span></code></a>, <a class="reference internal" href="#module-tmol.utility.reactive" title="tmol.utility.reactive"><code class="xref any py py-mod docutils literal notranslate"><span class="pre">reactive</span></code></a> allows direct declaration of
inter-function dependencies.</p>
<p>For example, <code class="docutils literal notranslate"><span class="pre">FactionalAnalysis</span></code> results in the dependency graph:</p>
<div align="center" class="align-center"><img src="../_images/graphviz-af050dce8073f887a770a81a2fb6ecbd05d56f58.png" alt="digraph {
    source [shape=box ]
    capulet_faction [shape=box ]
    montegue_faction [shape=box ]

    source -&gt; lines
    lines -&gt; soliloquies

    capulet_faction -&gt; capulet_verbosity
    soliloquies -&gt; capulet_verbosity

    montegue_faction -&gt; montegue_verbosity
    soliloquies -&gt; montegue_verbosity
}" />
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
<div class="section" id="result-caching">
<h3>Result Caching<a class="headerlink" href="#result-caching" title="Permalink to this headline">¶</a></h3>
<p>Given the assumption of <a class="reference external" href="https://toolz.readthedocs.io/en/latest/purity.html" title="(in Toolz v0.9.0)"><span class="xref std std-doc">functional purity</span></a>, <a class="reference internal" href="#module-tmol.utility.reactive" title="tmol.utility.reactive"><code class="xref any py py-mod docutils literal notranslate"><span class="pre">reactive</span></code></a>
caches the result of <a class="reference internal" href="#tmol.utility.reactive.reactive_property" title="tmol.utility.reactive.reactive_property"><code class="xref any py py-func docutils literal notranslate"><span class="pre">reactive_property</span></code></a> evaluations from the on-demand
resolution of property arguments. This provides in a lazy pull-based execution
model, in which requesting a <a class="reference internal" href="#tmol.utility.reactive.reactive_property" title="tmol.utility.reactive.reactive_property"><code class="xref any py py-func docutils literal notranslate"><span class="pre">reactive_property</span></code></a> value results in the
evaluation, and caching, of its antecedent dependencies.</p>
<p>In <code class="docutils literal notranslate"><span class="pre">FactionalAnalysis</span></code>, <code class="docutils literal notranslate"><span class="pre">analysis.capulet_verbosity</span></code> results in in the
evaluations:</p>
<div align="center" class="align-center"><img src="../_images/graphviz-55fe7f2b57d4bb6334e1374fcf1bc7cb57b6b981.png" alt="digraph {
    source [shape=box ]
    capulet_faction [shape=box ]
    montegue_faction [shape=box ]

    lines [style=filled]
    soliloquies [style=filled]
    capulet_verbosity [style=filled]

    source -&gt; lines [penwidth=5.0]
    lines -&gt; soliloquies [penwidth=5.0]

    capulet_faction -&gt; capulet_verbosity [penwidth=5.0]
    soliloquies -&gt; capulet_verbosity [penwidth=5.0]

    montegue_faction -&gt; montegue_verbosity
    soliloquies -&gt; montegue_verbosity
}" />
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p>The subsequent <code class="docutils literal notranslate"><span class="pre">analysis.montegue_verbosity</span></code> reuses the cached
<code class="docutils literal notranslate"><span class="pre">soliloquies</span></code>, resulting in the evaluations:</p>
<div align="center" class="align-center"><img src="../_images/graphviz-ca9988c0f2842e752e570668bfc690336edbbb7a.png" alt="digraph {
    source [shape=box ]
    capulet_faction [shape=box ]
    montegue_faction [shape=box ]

    lines [style=filled]
    soliloquies [style=filled]
    capulet_verbosity [style=filled]
    montegue_verbosity [style=filled]

    source -&gt; lines
    lines -&gt; soliloquies

    capulet_faction -&gt; capulet_verbosity
    soliloquies -&gt; capulet_verbosity

    montegue_faction -&gt; montegue_verbosity [penwidth=5.0]
    soliloquies -&gt; montegue_verbosity [penwidth=5.0]
}" />
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p>Further access to any property returns the cached value.</p>
</div>
<div class="section" id="reactive-invalidation">
<h3>Reactive Invalidation<a class="headerlink" href="#reactive-invalidation" title="Permalink to this headline">¶</a></h3>
<p><a class="reference internal" href="#module-tmol.utility.reactive" title="tmol.utility.reactive"><code class="xref any py py-mod docutils literal notranslate"><span class="pre">reactive</span></code></a> uses the declared dependency graph to invalidate dependent values if
an attribute value is changed, and forward-propogates the invalidation of
reactive properties to all dependents. This provides a lazy, push-based update
model, in which updating an attribute value results in the selective
invalidation of its full direct and indirect dependencies.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p><a class="reference internal" href="#module-tmol.utility.reactive" title="tmol.utility.reactive"><code class="xref any py py-mod docutils literal notranslate"><span class="pre">reactive</span></code></a> only tracks modification of attribute values by <a class="reference external" href="https://docs.python.org/3/library/functions.html#setattr" title="(in Python v3.7)"><code class="xref any docutils literal notranslate"><span class="pre">setattr</span></code></a>,
and does <em>not</em> track internal modification of attribute values. Updates to
attributes must be propogated by property reassignment. Eg:</p>
<div class="last highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># Possible, modify and assign</span>
<span class="n">analysis</span><span class="o">.</span><span class="n">capulet_faction</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="s2">&quot;Sampson&quot;</span><span class="p">,</span> <span class="s2">&quot;Gregory&quot;</span><span class="p">])</span>
<span class="n">analysis</span><span class="o">.</span><span class="n">capulet_faction</span> <span class="o">=</span> <span class="n">analysis</span><span class="o">.</span><span class="n">capulet_faction</span>

<span class="c1"># Preferred, assign updated value</span>
<span class="n">analysis</span><span class="o">.</span><span class="n">capulet_faction</span> <span class="o">=</span> <span class="n">analysis</span><span class="o">.</span><span class="n">capulet_faction</span> <span class="o">+</span> <span class="p">[</span><span class="s2">&quot;Sampson&quot;</span><span class="p">,</span> <span class="s2">&quot;Gregory&quot;</span><span class="p">]</span>
</pre></div>
</div>
</div>
<p>In <code class="docutils literal notranslate"><span class="pre">FactionalAnalysis</span></code> an update of <code class="docutils literal notranslate"><span class="pre">capulet_faction</span></code> results in invalidations:</p>
<div align="center" class="align-center"><img src="../_images/graphviz-856f1ce16cfe385ec9f63c92aebf9d0de4f245d0.png" alt="digraph {
    source [shape=box ]
    capulet_faction [shape=tripleoctagon ]
    montegue_faction [shape=box ]

    lines [style=filled]
    soliloquies [style=filled]
    capulet_verbosity [style=dashed]
    montegue_verbosity [style=filled]

    source -&gt; lines
    lines -&gt; soliloquies

    capulet_faction -&gt; capulet_verbosity [penwidth=5.0]
    soliloquies -&gt; capulet_verbosity

    montegue_faction -&gt; montegue_verbosity
    soliloquies -&gt; montegue_verbosity
}" />
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p>A subsequent update of <code class="docutils literal notranslate"><span class="pre">source</span></code> results in the forward-invalidations:</p>
<div align="center" class="align-center"><img src="../_images/graphviz-a0514edc899b0f733bcbbf652ed22927e7fb0a4a.png" alt="digraph {
    source [shape=tripleoctagon ]
    capulet_faction [shape=box ]
    montegue_faction [shape=box ]

    lines [style=dashed]
    soliloquies [style=dashed]
    capulet_verbosity
    montegue_verbosity [style=dashed]

    source -&gt; lines [penwidth=5.0]
    lines -&gt; soliloquies [penwidth=5.0]

    capulet_faction -&gt; capulet_verbosity
    soliloquies -&gt; capulet_verbosity [penwidth=5.0]

    montegue_faction -&gt; montegue_verbosity
    soliloquies -&gt; montegue_verbosity [penwidth=5.0]
}" />
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
<div class="section" id="class-composition">
<h3>Class Composition<a class="headerlink" href="#class-composition" title="Permalink to this headline">¶</a></h3>
<p><a class="reference internal" href="#module-tmol.utility.reactive" title="tmol.utility.reactive"><code class="xref any py py-mod docutils literal notranslate"><span class="pre">reactive</span></code></a> classes can be combined via standard inheritance, with cross class
dependencies are resolved via by the standard <a class="reference external" href="https://docs.python.org/3/glossary.html#term-method-resolution-order" title="(in Python v3.7)"><span class="xref std std-term">method resolution order</span></a>. This enables a robust mixin-based
composition model in which function inputs are passed, by name, between loosely
coupled components.</p>
<p>For example, consider an extension of <code class="docutils literal notranslate"><span class="pre">FactionalAnalysis</span></code> to incorporate an
additional form of sentiment analysis:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nd">@reactive_attrs</span><span class="p">(</span><span class="n">auto_attribs</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">class</span> <span class="nc">Source</span><span class="p">:</span>
    <span class="n">source</span><span class="p">:</span> <span class="nb">str</span>

    <span class="n">montegue_faction</span><span class="p">:</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span>
        <span class="s2">&quot;Romeo&quot;</span><span class="p">,</span> <span class="s2">&quot;Benvolio&quot;</span><span class="p">,</span> <span class="s2">&quot;Montegue&quot;</span><span class="p">,</span> <span class="s2">&quot;Lady Montegue&quot;</span>
    <span class="p">]</span>
    <span class="n">capulet_faction</span><span class="p">:</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span>
        <span class="s2">&quot;Juliet&quot;</span><span class="p">,</span> <span class="s2">&quot;Tybalt&quot;</span><span class="p">,</span> <span class="s2">&quot;Capulet&quot;</span><span class="p">,</span> <span class="s2">&quot;Lady Capulet&quot;</span>
    <span class="p">]</span>

    <span class="nd">@reactive_property</span>
    <span class="k">def</span> <span class="nf">lines</span><span class="p">(</span><span class="n">source</span><span class="p">);</span>
        <span class="sd">&#39;&#39;&#39;Convert text of play to spoken lines.&#39;&#39;&#39;</span>
        <span class="o">...</span>

<span class="nd">@reactive_attrs</span>
<span class="k">class</span> <span class="nc">Verbosity</span><span class="p">:</span>
    <span class="nd">@reactive_property</span>
    <span class="k">def</span> <span class="nf">soliloquies</span><span class="p">(</span><span class="n">lines</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Group spoken lines and identify soliloquies.&#39;&#39;&#39;</span>
        <span class="o">...</span>

    <span class="nd">@reactive_property</span>
    <span class="k">def</span> <span class="nf">montegue_verbosity</span><span class="p">(</span><span class="n">montegue_faction</span><span class="p">,</span> <span class="n">soliloquies</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Calcuate average verbosity of the Montegue faction.&#39;&#39;&#39;</span>
        <span class="o">...</span>

    <span class="nd">@reactive_property</span>
    <span class="k">def</span> <span class="nf">capulet_verbosity</span><span class="p">(</span><span class="n">capulet_faction</span><span class="p">,</span> <span class="n">soliloquies</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Calcuate average verbosity of the Capulet faction.&#39;&#39;&#39;</span>
        <span class="o">...</span>

<span class="nd">@reactive_attrs</span>
<span class="k">class</span> <span class="nc">Sentiment</span><span class="p">:</span>
    <span class="nd">@reactive_property</span>
    <span class="k">def</span> <span class="nf">modern_lines</span><span class="p">(</span><span class="n">lines</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Convert from shakespearean to modern english.&#39;&#39;&#39;</span>
        <span class="o">...</span>

    <span class="nd">@reactive_property</span>
    <span class="k">def</span> <span class="nf">line_sentiment</span><span class="p">(</span><span class="n">modern_lines</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Black-box sentiment analysis.&#39;&#39;&#39;</span>
        <span class="o">...</span>

    <span class="nd">@reactive_property</span>
    <span class="k">def</span> <span class="nf">montegue_sentiment</span><span class="p">(</span><span class="n">montegue_faction</span><span class="p">,</span> <span class="n">line_sentiment</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Calcuate average sentiment of the Montegue faction.&#39;&#39;&#39;</span>
        <span class="o">...</span>

    <span class="nd">@reactive_property</span>
    <span class="k">def</span> <span class="nf">capulet_sentiment</span><span class="p">(</span><span class="n">capulet_faction</span><span class="p">,</span> <span class="n">line_sentiment</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Calcuate average sentiment of the Capulet faction.&#39;&#39;&#39;</span>
        <span class="o">...</span>

<span class="nd">@reactive_attrs</span>
<span class="k">class</span> <span class="nc">GrudgeAnalysis</span><span class="p">(</span><span class="n">Sourde</span><span class="p">,</span> <span class="n">Verbosity</span><span class="p">,</span> <span class="n">Sentiment</span><span class="p">):</span>
    <span class="nd">@reactive_property</span>
    <span class="k">def</span> <span class="nf">grudge</span><span class="p">(</span>
        <span class="n">montegue_sentiment</span><span class="p">,</span>
        <span class="n">montegue_verbosity</span><span class="p">,</span>
        <span class="n">capulet_sentiment</span><span class="p">,</span>
        <span class="n">capulet_verbosity</span><span class="p">,</span>
    <span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;From ancient grudge break to new mutiny?&#39;&#39;&#39;</span>
        <span class="k">pass</span>
</pre></div>
</div>
<p>Resulting in the combined reactive dependencies:</p>
<div align="center" class="align-center"><img src="../_images/graphviz-aad95c0e26d7216e0cbcce11856ea720d2b705c4.png" alt="digraph {
    subgraph cluster_Source {
        label = &quot;Source&quot;

        source [shape=box ]
        capulet_faction [shape=box ]
        montegue_faction [shape=box ]

        lines
        source -&gt; lines
    }

    subgraph cluster_Verbosity {
        label = &quot;Verbosity&quot;

        soliloquies
        capulet_verbosity
        montegue_verbosity

        lines -&gt; soliloquies

        capulet_faction -&gt; capulet_verbosity
        soliloquies -&gt; capulet_verbosity

        montegue_faction -&gt; montegue_verbosity
        soliloquies -&gt; montegue_verbosity
    }

    subgraph cluster_Sentiment {
        label = &quot;Sentiment&quot;

        modern_lines
        line_sentiment

        montegue_sentiment
        capulet_sentiment

        lines -&gt; modern_lines
        modern_lines -&gt; line_sentiment

        line_sentiment -&gt; montegue_sentiment
        montegue_faction -&gt; montegue_sentiment

        line_sentiment -&gt; capulet_sentiment
        capulet_faction -&gt; capulet_sentiment
    }

    subgraph cluster_GrudgeAnalysis {
        label = &quot;GrudgeAnalysis&quot;;

        grudge

        capulet_sentiment -&gt; grudge
        capulet_verbosity -&gt; grudge

        montegue_sentiment -&gt; grudge
        montegue_verbosity -&gt; grudge
    }


}" />
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
<div class="section" id="custom-invalidation">
<h3>Custom Invalidation<a class="headerlink" href="#custom-invalidation" title="Permalink to this headline">¶</a></h3>
<p>Forward-invalidation can be customized on a per-property basis via an optional
<code class="xref py py-meth docutils literal notranslate"><span class="pre">should_invalidate()</span></code> function. The function is provided (a) the current
reactive property value, (b) the name of the changed input value and (c) the
updated input parameter value, returning <a class="reference external" href="https://docs.python.org/3/library/constants.html#True" title="(in Python v3.7)"><code class="xref any docutils literal notranslate"><span class="pre">True</span></code></a> if the reactive property should
be invalidated in response to the change and <a class="reference external" href="https://docs.python.org/3/library/constants.html#False" title="(in Python v3.7)"><code class="xref any docutils literal notranslate"><span class="pre">False</span></code></a> if the reactive value
should be preserved.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last"><code class="docutils literal notranslate"><span class="pre">should_invalidate</span></code> <em>requires</em> the value of reevaluation of
parameter dependencies to provide an updated input parameter value, causing an
“eager” reevaluation of the subgraph preceeding the <code class="docutils literal notranslate"><span class="pre">should_invalidate</span></code>
property.</p>
</div>
</div>
<div class="section" id="parameters">
<h3>** Parameters<a class="headerlink" href="#parameters" title="Permalink to this headline">¶</a></h3>
<p>Functions with <a class="reference external" href="https://docs.python.org/3/glossary.html#term-parameter" title="(in Python v3.7)"><span class="xref std std-term">**keyword parameters</span></a> <em>must</em>
specify a set of expected argument names when added as a <a class="reference internal" href="#tmol.utility.reactive.reactive_property" title="tmol.utility.reactive.reactive_property"><code class="xref any py py-func docutils literal notranslate"><span class="pre">reactive_property</span></code></a>.</p>
</div>
</div>
<div class="section" id="summary">
<h2>Summary<a class="headerlink" href="#summary" title="Permalink to this headline">¶</a></h2>
<div class="section" id="classes">
<h3>Classes<a class="headerlink" href="#classes" title="Permalink to this headline">¶</a></h3>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="#tmol.utility.reactive.ReactiveProperty" title="tmol.utility.reactive.ReactiveProperty"><code class="xref py py-obj docutils literal notranslate"><span class="pre">ReactiveProperty</span></code></a></td>
<td>Post-init property managing a reactive property.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="functions">
<h3>Functions<a class="headerlink" href="#functions" title="Permalink to this headline">¶</a></h3>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="#tmol.utility.reactive.reactive_attrs" title="tmol.utility.reactive.reactive_attrs"><code class="xref py py-obj docutils literal notranslate"><span class="pre">reactive_attrs</span></code></a></td>
<td>A class decorator that initializes reactive properties over the target type.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#tmol.utility.reactive.reactive_property" title="tmol.utility.reactive.reactive_property"><code class="xref py py-obj docutils literal notranslate"><span class="pre">reactive_property</span></code></a></td>
<td>Decorate a function as a reactive property of a class.</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="reference">
<h2>Reference<a class="headerlink" href="#reference" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="tmol.utility.reactive._code">
<code class="descclassname">tmol.utility.reactive.</code><code class="descname">_code</code><span class="sig-paren">(</span><em>argcount</em>, <em>kwonlyargcount</em>, <em>nlocals</em>, <em>stacksize</em>, <em>flags</em>, <em>codestring</em>, <em>constants</em>, <em>names</em>, <em>varnames</em>, <em>filename</em>, <em>name</em>, <em>firstlineno</em>, <em>lnotab</em>, <em>freevars</em>, <em>cellvars</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/tmol/utility/reactive.html#_code"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#tmol.utility.reactive._code" title="Permalink to this definition">¶</a></dt>
<dd><p>Construct type.CodeType, ignoring unneeded kwargs.</p>
</dd></dl>

<dl class="function">
<dt id="tmol.utility.reactive._code_attrs">
<code class="descclassname">tmol.utility.reactive.</code><code class="descname">_code_attrs</code><span class="sig-paren">(</span><em>c</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/tmol/utility/reactive.html#_code_attrs"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#tmol.utility.reactive._code_attrs" title="Permalink to this definition">¶</a></dt>
<dd><p>Unpack types.CodeType attrs (‘co_&lt;name&gt;’) into __init__ params (‘&lt;name&gt;’).</p>
</dd></dl>

<dl class="function">
<dt id="tmol.utility.reactive._rename_code_object">
<code class="descclassname">tmol.utility.reactive.</code><code class="descname">_rename_code_object</code><span class="sig-paren">(</span><em>func</em>, <em>new_name</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/tmol/utility/reactive.html#_rename_code_object"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#tmol.utility.reactive._rename_code_object" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="tmol.utility.reactive.reactive_attrs">
<code class="descclassname">tmol.utility.reactive.</code><code class="descname">reactive_attrs</code><span class="sig-paren">(</span><em>maybe_cls=None</em>, <em>**attrs_kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/tmol/utility/reactive.html#reactive_attrs"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#tmol.utility.reactive.reactive_attrs" title="Permalink to this definition">¶</a></dt>
<dd><p>A class decorator that initializes reactive properties over the target
type.</p>
</dd></dl>

<dl class="function">
<dt id="tmol.utility.reactive.reactive_property">
<code class="descclassname">tmol.utility.reactive.</code><code class="descname">reactive_property</code><span class="sig-paren">(</span><em>func=None</em>, <em>*</em>, <em>should_invalidate=None</em>, <em>kwargs=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/tmol/utility/reactive.html#reactive_property"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#tmol.utility.reactive.reactive_property" title="Permalink to this definition">¶</a></dt>
<dd><p>Decorate a function as a reactive property of a class.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Does <em>not</em> do anything unless the class is also decorated with
<a class="reference internal" href="#tmol.utility.reactive.reactive_attrs" title="tmol.utility.reactive.reactive_attrs"><code class="xref py py-func docutils literal notranslate"><span class="pre">reactive_attrs()</span></code></a>.</p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>func</strong> – The target function. The reactive property name and
dependencies will be inferred from the function name and signature.</li>
<li><strong>should_invalidate</strong> – A <a class="reference external" href="https://docs.python.org/3/library/functions.html#callable" title="(in Python v3.7)"><code class="xref py py-func docutils literal notranslate"><span class="pre">callable()</span></code></a> controlling selective
invalidation of the reactive property in response to dependency
changes.</li>
<li><strong>kwargs</strong> – Name of expected keyword parameters iff <code class="docutils literal notranslate"><span class="pre">func</span></code> accepts
<a class="reference external" href="https://docs.python.org/3/glossary.html#term-parameter" title="(in Python v3.7)"><span class="xref std std-term">**keyword parameters</span></a>.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="class">
<dt id="tmol.utility.reactive.ReactiveProperty">
<em class="property">class </em><code class="descclassname">tmol.utility.reactive.</code><code class="descname">ReactiveProperty</code><span class="sig-paren">(</span><em>name: str, f: Callable, parameters: Tuple[str, ...], should_invalidate: Union[typing.Callable[[typing.Any, str, typing.Any], bool], NoneType] = None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/tmol/utility/reactive.html#ReactiveProperty"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#tmol.utility.reactive.ReactiveProperty" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#property" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">property</span></code></a></p>
<p>Post-init property managing a reactive property.</p>
<p><a class="reference external" href="https://docs.python.org/3/library/functions.html#property" title="(in Python v3.7)"><code class="xref any docutils literal notranslate"><span class="pre">property</span></code></a> subclass representing a reactive property within a reactive
class. This is a standard <a class="reference external" href="https://docs.python.org/3/library/functions.html#property" title="(in Python v3.7)"><code class="xref any docutils literal notranslate"><span class="pre">property</span></code></a> with fget &amp; fdel methods and
reactive-level metadata.</p>
<dl class="attribute">
<dt id="tmol.utility.reactive.ReactiveProperty.name">
<code class="descname">name</code><a class="headerlink" href="#tmol.utility.reactive.ReactiveProperty.name" title="Permalink to this definition">¶</a></dt>
<dd><p>Name within the reactive property graph, inferred from assigned
name in class construction</p>
</dd></dl>

<dl class="attribute">
<dt id="tmol.utility.reactive.ReactiveProperty.f">
<code class="descname">f</code><a class="headerlink" href="#tmol.utility.reactive.ReactiveProperty.f" title="Permalink to this definition">¶</a></dt>
<dd><p>Pure function used to calculate the property value.</p>
</dd></dl>

<dl class="attribute">
<dt id="tmol.utility.reactive.ReactiveProperty.parameters">
<code class="descname">parameters</code><a class="headerlink" href="#tmol.utility.reactive.ReactiveProperty.parameters" title="Permalink to this definition">¶</a></dt>
<dd><p>Named parameters for f, to be resolved from reactive object.</p>
</dd></dl>

<dl class="attribute">
<dt id="tmol.utility.reactive.ReactiveProperty.should_invalidate">
<code class="descname">should_invalidate</code><a class="headerlink" href="#tmol.utility.reactive.ReactiveProperty.should_invalidate" title="Permalink to this definition">¶</a></dt>
<dd><p>An optional value invalidation check function for f.</p>
</dd></dl>

<dl class="attribute">
<dt>
<code class="descname">should_invalidate</code><em class="property"> = None</em></dt>
<dd></dd></dl>

<dl class="method">
<dt id="tmol.utility.reactive.ReactiveProperty.getter">
<code class="descname">getter</code><span class="sig-paren">(</span><em>_</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/tmol/utility/reactive.html#ReactiveProperty.getter"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#tmol.utility.reactive.ReactiveProperty.getter" title="Permalink to this definition">¶</a></dt>
<dd><p>Descriptor to change the getter on a property.</p>
</dd></dl>

<dl class="method">
<dt id="tmol.utility.reactive.ReactiveProperty.setter">
<code class="descname">setter</code><span class="sig-paren">(</span><em>_</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/tmol/utility/reactive.html#ReactiveProperty.setter"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#tmol.utility.reactive.ReactiveProperty.setter" title="Permalink to this definition">¶</a></dt>
<dd><p>Descriptor to change the setter on a property.</p>
</dd></dl>

<dl class="method">
<dt id="tmol.utility.reactive.ReactiveProperty.deleter">
<code class="descname">deleter</code><span class="sig-paren">(</span><em>_</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/tmol/utility/reactive.html#ReactiveProperty.deleter"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#tmol.utility.reactive.ReactiveProperty.deleter" title="Permalink to this definition">¶</a></dt>
<dd><p>Descriptor to change the deleter on a property.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="tmol.utility.reactive._ReactiveProperty">
<em class="property">class </em><code class="descclassname">tmol.utility.reactive.</code><code class="descname">_ReactiveProperty</code><span class="sig-paren">(</span><em>f: Callable, parameters: Tuple[str, ...], should_invalidate: Union[typing.Callable[[typing.Any, str, typing.Any], bool], NoneType] = None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/tmol/utility/reactive.html#_ReactiveProperty"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#tmol.utility.reactive._ReactiveProperty" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>Pre-init representation of a reactive property.</p>
<p>Stub representation of a reactive property before a reactive class is
processed to generate the reactive property graph.</p>
<dl class="attribute">
<dt id="tmol.utility.reactive._ReactiveProperty.f">
<code class="descname">f</code><a class="headerlink" href="#tmol.utility.reactive._ReactiveProperty.f" title="Permalink to this definition">¶</a></dt>
<dd><p>Pure function used to calculate the property value.</p>
</dd></dl>

<dl class="attribute">
<dt id="tmol.utility.reactive._ReactiveProperty.parameters">
<code class="descname">parameters</code><a class="headerlink" href="#tmol.utility.reactive._ReactiveProperty.parameters" title="Permalink to this definition">¶</a></dt>
<dd><p>Named parameters for f, to be resolved from reactive object.</p>
</dd></dl>

<dl class="attribute">
<dt id="tmol.utility.reactive._ReactiveProperty._should_invalidate">
<code class="descname">_should_invalidate</code><a class="headerlink" href="#tmol.utility.reactive._ReactiveProperty._should_invalidate" title="Permalink to this definition">¶</a></dt>
<dd><p>An optional value invalidation check function for f.</p>
</dd></dl>

<dl class="attribute">
<dt>
<code class="descname">f</code></dt>
<dd></dd></dl>

<dl class="attribute">
<dt>
<code class="descname">parameters</code></dt>
<dd></dd></dl>

<dl class="attribute">
<dt>
<code class="descname">_should_invalidate</code></dt>
<dd></dd></dl>

<dl class="method">
<dt id="tmol.utility.reactive._ReactiveProperty.should_invalidate">
<code class="descname">should_invalidate</code><span class="sig-paren">(</span><em>f=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/tmol/utility/reactive.html#_ReactiveProperty.should_invalidate"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#tmol.utility.reactive._ReactiveProperty.should_invalidate" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="classmethod">
<dt id="tmol.utility.reactive._ReactiveProperty.from_function">
<em class="property">classmethod </em><code class="descname">from_function</code><span class="sig-paren">(</span><em>fun: Callable, kwargs: Union[str, typing.Tuple[str, ...], NoneType] = None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/tmol/utility/reactive.html#_ReactiveProperty.from_function"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#tmol.utility.reactive._ReactiveProperty.from_function" title="Permalink to this definition">¶</a></dt>
<dd><p>Init property from function, inferring parameters from signature.</p>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="tmol.utility.reactive._setup_reactive">
<code class="descclassname">tmol.utility.reactive.</code><code class="descname">_setup_reactive</code><span class="sig-paren">(</span><em>cls</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/tmol/utility/reactive.html#_setup_reactive"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#tmol.utility.reactive._setup_reactive" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="tmol.utility.reactive._invalidate_reactive_deps">
<code class="descclassname">tmol.utility.reactive.</code><code class="descname">_invalidate_reactive_deps</code><span class="sig-paren">(</span><em>obj</em>, <em>attribute_name</em>, <em>new_val=NOTHING</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/tmol/utility/reactive.html#_invalidate_reactive_deps"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#tmol.utility.reactive._invalidate_reactive_deps" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="tmol.utility.units.html" class="btn btn-neutral float-right" title="tmol.utility.units" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="tmol.utility.numba.html" class="btn btn-neutral" title="tmol.utility.numba" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018, TMol Contributers.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'0.0.0-90-g97dc5e2',
            LANGUAGE:'None',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  <script type="text/javascript" src="../_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>